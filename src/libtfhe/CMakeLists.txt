cmake_minimum_required(VERSION 3.0)

project(libtfhe)

# include the fft processors in the build process
add_subdirectory(fft_processors)

set(SRCS
    autogenerated.cpp
    lwebootstrappingkey.cpp
    lwe.cpp
    lwe-functions.cpp
    lwekey.cpp
    lwekeyswitch.cpp
    lweparams.cpp
    lwesamples.cpp
    multiplication.cpp
    numeric-functions.cpp
    polynomials.cpp
    tgsw.cpp
    tlwe.cpp
    tlwefftoperations.cpp
    toruspolynomial-functions.cpp
    boot-gates.cpp
    lwe-keyswitch-functions.cpp
    lwe-bootstrapping-functions.cpp
    )


add_library(tfhe-core OBJECT ${SRCS} ${TFHE_HEADERS})

foreach (FFT_PROCESSOR IN LISTS FFT_PROCESSORS) 
    add_library(tfhe-${FFT_PROCESSOR} 
	$<TARGET_OBJECTS:tfhe-core>
	$<TARGET_OBJECTS:tfhe-fft-${FFT_PROCESSOR}>)
endforeach (FFT_PROCESSOR IN LISTS FFT_PROCESSORS) 

